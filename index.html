<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Magnet Letters Final</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ccapture.js/1.1.0/CCapture.all.min.js"></script>
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; font-family: sans-serif; }
    #canvasWrapper { position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1; }
    #togglePanelBtn {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 20;
      background: #fff;
      padding: 4px 10px;
      border-radius: 6px;
      border: 1px solid #aaa;
      cursor: pointer;
    }
    #controls {
      position: fixed;
      top: 50px;
      left: 10px;
      background: rgba(255, 255, 255, 0.95);
      padding: 10px;
      border-radius: 8px;
      z-index: 10;
      max-width: 320px;
      font-size: 14px;
      display: none;
    }
    textarea { width: 100%; height: 60px; }
  </style>
</head>
<body>
  <button id="togglePanelBtn" onclick="toggleControls()">☰ Panel</button>
  <div id="controls">
    <label>Canvas Size: W <input id="canvasW" type="number" value="1040" style="width:60px"> H <input id="canvasH" type="number" value="735" style="width:60px"></label><br>
    <label>Text: <textarea id="textInputBox"></textarea></label><br>
    <label>Font Size: <input type="number" id="fontSize" value="20"></label><br>
    <label>Line Spacing: <input type="number" id="lineSpacing" value="28"></label><br>
    <label>Easing: <input type="range" id="easing" min="0.01" max="0.3" step="0.01" value="0.1"></label><br>
    <label>Font Color: <input type="color" id="fontColor" value="#000000"></label>
    <label>BG Color: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Upload Font: <input type="file" id="fontUpload" accept=".ttf,.otf"></label><br>
    <label>Upload BG Image/Video: <input type="file" id="bgUpload" accept="image/*,video/*"></label><br>
    <button onclick="startRecording()">🎥 Start Recording</button>
    <button onclick="stopRecording()">⏹ Stop</button>
    <button onclick="saveCanvasImage()">🖼 Export JPG</button>
  </div>
  <div id="canvasWrapper"></div>
  <script>
    // 内容与功能省略（由上文确认无误的版本）
    // 将在实际项目中完整写入
  </script>
</body>
</html>